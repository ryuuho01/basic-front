(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{272:function(e,t,r){var content=r(285);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(65).default)("b2262cac",content,!0,{sourceMap:!1})},273:function(e,t,r){var content=r(287);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(65).default)("33da00c9",content,!0,{sourceMap:!1})},284:function(e,t,r){"use strict";r(272)},285:function(e,t,r){var n=r(64)(!1);n.push([e.i,".mypage-container[data-v-f566ddee]{display:flex;margin:0 105px}.left-side[data-v-f566ddee]{width:37%;margin-right:80px}.left-side h2[data-v-f566ddee]{font-size:20px;padding:30px 0;margin-top:45px}.reservation[data-v-f566ddee]{width:100%;height:240px;background-color:#305dff;border-radius:5px;box-shadow:2px 2px 2px #ababab;color:#fff;position:relative;margin-bottom:20px}.time-pic[data-v-f566ddee]{background-color:#fff;width:23px;height:23px;border-radius:50%;border:none;display:flex;align-items:center;justify-content:center;position:absolute;top:28px;left:25px}.time-pic img[data-v-f566ddee]{width:25px;height:25px}.close-pic[data-v-f566ddee]{width:21px;height:21px;border-radius:50%;border:none;display:flex;align-items:center;justify-content:center;position:absolute;top:28px;right:27px}.close-pic img[data-v-f566ddee]{width:23px;height:23px;cursor:pointer}.close-pic img[data-v-f566ddee]:hover{opacity:.7;transition:.3s}.reservation p[data-v-f566ddee]{display:flex;align-items:center;font-weight:400;font-size:12px;height:80px;padding-left:75px}.reservation table[data-v-f566ddee]{width:100%;text-align:left}.reservation table tr[data-v-f566ddee]{height:32px}.reservation table th[data-v-f566ddee]{font-weight:400;width:80px;padding-left:25px}.reservation table td[data-v-f566ddee],.reservation table th[data-v-f566ddee]{font-size:12px;vertical-align:middle}",""]),e.exports=n},286:function(e,t,r){"use strict";r(273)},287:function(e,t,r){var n=r(64)(!1);n.push([e.i,".right-side[data-v-f566ddee]{width:55%}.right-side h2[data-v-f566ddee]{font-size:25px;padding:10px 0}.right-side p[data-v-f566ddee]{padding:30px 0;font-size:20px;font-weight:700}.shopcards[data-v-f566ddee]{display:flex;flex-wrap:wrap;width:100%;justify-content:space-between}.shopcard[data-v-f566ddee]{width:260px;height:245px;background-color:#fff;border-radius:5px;box-shadow:2px 2px 2px #ababab;margin-bottom:20px}.shop-pic[data-v-f566ddee],.shop-pic img[data-v-f566ddee]{height:130px;border-radius:5px 5px 0 0}.shop-pic img[data-v-f566ddee]{width:100%;-o-object-fit:cover;object-fit:cover}.shop-des[data-v-f566ddee]{width:270px;height:110px}.shop-des h2[data-v-f566ddee]{padding:15px 0 0 20px;font-size:15px}.shop-des p[data-v-f566ddee]{padding:7px 20px;font-size:12px}.shop-des button[data-v-f566ddee]{border-radius:5px;border:none;background-color:#305dff;color:#fff;padding:5px 13px;cursor:pointer;font-size:12px}.shop-des button[data-v-f566ddee]:hover{opacity:.7;transition:.3s}.flex[data-v-f566ddee]{display:flex;align-items:center;justify-content:space-between;padding:10px 20px}.flex div img[data-v-f566ddee]{height:27px;width:27px;margin-right:10px;cursor:pointer}",""]),e.exports=n},305:function(e,t,r){"use strict";r.r(t);var n,o,d,c=r(11),f=(r(66),r(44),r(30),r(78),r(108)),h=r(76),v=r.n(h),l={data:function(){return{userId:null,userName:null,shopCurrent:null,reservationsCurrent:null,favoriteCurrent:null}},created:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.get("https://afternoon-beyond-97179.herokuapp.com/api/user");case 2:return r=t.sent,t.next=5,v.a.get("https://afternoon-beyond-97179.herokuapp.com/api/shop").then((function(t){return e.shopCurrent=t.data.data}));case 5:f.a.auth().onAuthStateChanged((function(t){if(t){for(var n=t.email,o=0,d="",i=0;i<r.data.data.length;i++)r.data.data[i].email==n&&(o=r.data.data[i].id,d=r.data.data[i].name);e.userId=o,e.userName=d;for(var c=[],f=0;f<e.shopCurrent.length;f++)for(var h=0;h<e.shopCurrent[f].reservations.length;h++)e.shopCurrent[f].reservations[h].user_id==e.userId&&c.push(e.shopCurrent[f]);e.reservationsCurrent=c;for(var v=[],l=0,x=0;x<e.shopCurrent.length;x++){for(var _=0;_<e.shopCurrent[x].favorites.length;_++)e.shopCurrent[x].favorites[_].user_id==e.userId&&1==e.shopCurrent[x].favorites[_].favorite&&(v.push(e.shopCurrent[x]),l++);e.shopCurrent[x].favorites=0!=l?1:0}e.favoriteCurrent=v}}));case 6:case"end":return t.stop()}}),t)})))()},methods:{getInfo:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){var r,i,n,o,d,c,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.get("https://afternoon-beyond-97179.herokuapp.com/api/shop").then((function(t){return e.shopCurrent=t.data.data}));case 2:for(r=[],i=0;i<e.shopCurrent.length;i++)for(n=0;n<e.shopCurrent[i].reservations.length;n++)e.shopCurrent[i].reservations[n].user_id==e.userId&&r.push(e.shopCurrent[i]);for(e.reservationsCurrent=r,o=[],d=0,c=0;c<e.shopCurrent.length;c++){for(f=0;f<e.shopCurrent[c].favorites.length;f++)e.shopCurrent[c].favorites[f].user_id==e.userId&&1==e.shopCurrent[c].favorites[f].favorite&&(o.push(e.shopCurrent[c]),d++);e.shopCurrent[c].favorites=0!=d?1:0}e.favoriteCurrent=o;case 9:case"end":return t.stop()}}),t)})))()},destroy:(d=Object(c.a)(regeneratorRuntime.mark((function e(t){var r,n,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$axios.get("https://afternoon-beyond-97179.herokuapp.com/api/reservation");case 2:for(r=e.sent,n=0,i=0;i<r.data.data.length;i++)r.data.data[i].user_id==this.userId&&r.data.data[i].shop_id==t&&(n=r.data.data[i].id);return o="https://afternoon-beyond-97179.herokuapp.com/api/reservation/"+n,e.next=8,v.a.delete(o);case 8:this.getInfo();case 9:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)}),detail:function(e){this.$router.replace("/detail/"+e)},addFavorite:(o=Object(c.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===f.a.auth().currentUser){e.next=8;break}return r={user_id:this.userId,shop_id:t,favorite:!0},e.next=5,v.a.post("https://afternoon-beyond-97179.herokuapp.com/api/favorite",r);case 5:this.getInfo(),e.next=9;break;case 8:this.$router.replace("/login");case 9:case 10:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)}),deleteFavorite:(n=Object(c.a)(regeneratorRuntime.mark((function e(t){var r,n,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=0,e.next=3,this.$axios.get("https://afternoon-beyond-97179.herokuapp.com/api/favorite");case 3:n=e.sent,i=0;case 5:if(!(i<n.data.data.length)){e.next=13;break}if(n.data.data[i].user_id!=this.userId||n.data.data[i].shop_id!=t){e.next=9;break}return r=n.data.data[i].id,e.abrupt("break",13);case 9:case 10:i++,e.next=5;break;case 13:return o="https://afternoon-beyond-97179.herokuapp.com/api/favorite/"+r,e.next=16,v.a.delete(o);case 16:this.getInfo();case 17:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})}},x=l,_=(r(284),r(286),r(36)),component=Object(_.a)(x,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"mypage-container"},[r("div",{staticClass:"left-side"},[r("h2",[e._v("予約状況")]),e._v(" "),e._l(e.reservationsCurrent,(function(t,n){return r("div",{key:t.id,staticClass:"reservation"},[r("p",[e._v("予約"+e._s(n+1))]),e._v(" "),e._m(0,!0),e._v(" "),r("div",{staticClass:"close-pic"},[r("img",{attrs:{src:"/close.png",alt:"画像"},on:{click:function(r){return e.destroy(t.id)}}})]),e._v(" "),r("table",[r("tr",[r("th",[e._v("Shop")]),e._v(" "),r("td",[e._v(e._s(t.shop_name))])]),e._v(" "),r("tr",[r("th",[e._v("Date")]),e._v(" "),e._l(t.reservations,(function(t){return r("td",{key:t.id},[e._v(e._s(t.reservation_date.replace(t.reservation_date.slice(-9),"")))])}))],2),e._v(" "),r("tr",[r("th",[e._v("Time")]),e._v(" "),e._l(t.reservations,(function(t){return r("td",{key:t.id},[e._v(e._s(t.reservation_date.slice(-9).slice(0,6)))])}))],2),e._v(" "),r("tr",[r("th",[e._v("Number")]),e._v(" "),e._l(t.reservations,(function(t){return r("td",{key:t.id},[e._v(e._s(t.num_members)+"人")])}))],2)])])}))],2),e._v(" "),r("div",{staticClass:"right-side"},[r("h2",[e._v(e._s(e.userName)+"さん")]),e._v(" "),r("p",[e._v("お気に入り店舗")]),e._v(" "),r("div",{staticClass:"shopcards"},e._l(e.favoriteCurrent,(function(t){return r("div",{key:t.id,staticClass:"shopcard"},[r("div",{staticClass:"shop-pic"},[r("img",{attrs:{src:t.pic_path,alt:"画像"}})]),e._v(" "),r("div",{staticClass:"shop-des"},[r("h2",[e._v(e._s(t.shop_name))]),e._v(" "),r("p",[r("span",[e._v("#"+e._s(t.area_name)+" ")]),e._v(" "),r("span",[e._v("#"+e._s(t.genre_name)+" ")])]),e._v(" "),r("div",{staticClass:"flex"},[r("button",{on:{click:function(r){return e.detail(t.id)}}},[e._v("詳しくみる")]),e._v(" "),r("div",[1==t.favorites?r("img",{attrs:{src:"/heart2.png",alt:"画像"},on:{click:function(r){return e.deleteFavorite(t.id)}}}):r("img",{attrs:{src:"/heart1.png",alt:"画像"},on:{click:function(r){return e.addFavorite(t.id)}}})])])])])})),0)])])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"time-pic"},[t("img",{attrs:{src:"/time.png",alt:"画像"}})])}],!1,null,"f566ddee",null);t.default=component.exports}}]);