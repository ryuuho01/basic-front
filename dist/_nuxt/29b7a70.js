(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{272:function(t,e,r){var content=r(285);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(65).default)("37d694f2",content,!0,{sourceMap:!1})},273:function(t,e,r){var content=r(287);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(65).default)("7101cca6",content,!0,{sourceMap:!1})},284:function(t,e,r){"use strict";r(272)},285:function(t,e,r){var n=r(64)(!1);n.push([t.i,".mypage-container[data-v-2d646789]{display:flex;margin:0 105px}.left-side[data-v-2d646789]{width:37%;margin-right:80px}.left-side h2[data-v-2d646789]{font-size:20px;padding:30px 0;margin-top:45px}.reservation[data-v-2d646789]{width:100%;height:240px;background-color:#305dff;border-radius:5px;box-shadow:2px 2px 2px #ababab;color:#fff;position:relative;margin-bottom:20px}.time-pic[data-v-2d646789]{background-color:#fff;width:23px;height:23px;border-radius:50%;border:none;display:flex;align-items:center;justify-content:center;position:absolute;top:28px;left:25px}.time-pic img[data-v-2d646789]{width:25px;height:25px}.close-pic[data-v-2d646789]{width:21px;height:21px;border-radius:50%;border:none;display:flex;align-items:center;justify-content:center;position:absolute;top:28px;right:27px}.close-pic img[data-v-2d646789]{width:23px;height:23px;cursor:pointer}.close-pic img[data-v-2d646789]:hover{opacity:.7;transition:.3s}.reservation p[data-v-2d646789]{display:flex;align-items:center;font-weight:400;font-size:12px;height:80px;padding-left:75px}.reservation table[data-v-2d646789]{width:100%;text-align:left}.reservation table tr[data-v-2d646789]{height:32px}.reservation table th[data-v-2d646789]{font-weight:400;width:80px;padding-left:25px}.reservation table td[data-v-2d646789],.reservation table th[data-v-2d646789]{font-size:12px;vertical-align:middle}",""]),t.exports=n},286:function(t,e,r){"use strict";r(273)},287:function(t,e,r){var n=r(64)(!1);n.push([t.i,".right-side[data-v-2d646789]{width:55%}.right-side h2[data-v-2d646789]{font-size:25px;padding:10px 0}.right-side p[data-v-2d646789]{padding:30px 0;font-size:20px;font-weight:700}.shopcards[data-v-2d646789]{display:flex;flex-wrap:wrap;width:100%;justify-content:space-between}.shopcard[data-v-2d646789]{width:260px;height:245px;background-color:#fff;border-radius:5px;box-shadow:2px 2px 2px #ababab;margin-bottom:20px}.shop-pic[data-v-2d646789],.shop-pic img[data-v-2d646789]{height:130px;border-radius:5px 5px 0 0}.shop-pic img[data-v-2d646789]{width:100%;-o-object-fit:cover;object-fit:cover}.shop-des[data-v-2d646789]{width:270px;height:110px}.shop-des h2[data-v-2d646789]{padding:15px 0 0 20px;font-size:15px}.shop-des p[data-v-2d646789]{padding:7px 20px;font-size:12px}.shop-des button[data-v-2d646789]{border-radius:5px;border:none;background-color:#305dff;color:#fff;padding:5px 13px;cursor:pointer;font-size:12px}.shop-des button[data-v-2d646789]:hover{opacity:.7;transition:.3s}.flex[data-v-2d646789]{display:flex;align-items:center;justify-content:space-between;padding:10px 20px}.flex div img[data-v-2d646789]{height:27px;width:27px;margin-right:10px;cursor:pointer}",""]),t.exports=n},305:function(t,e,r){"use strict";r.r(e);var n,o,d,c=r(11),h=(r(66),r(44),r(30),r(78),r(108)),v=r(76),f=r.n(v),l={data:function(){return{userId:null,userName:null,shopCurrent:null,reservationsCurrent:null,favoriteCurrent:null}},created:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.get("https://afternoon-beyond-97179.herokuapp.com/api/user");case 2:return r=e.sent,e.next=5,f.a.get("https://afternoon-beyond-97179.herokuapp.com/api/shop").then((function(e){return t.shopCurrent=e.data.data}));case 5:h.a.auth().onAuthStateChanged((function(e){if(e){for(var n=e.email,o=0,d="",i=0;i<r.data.data.length;i++)r.data.data[i].email==n&&(o=r.data.data[i].id,d=r.data.data[i].name);t.userId=o,t.userName=d;for(var c=[],h=0;h<t.shopCurrent.length;h++)for(var v=0;v<t.shopCurrent[h].reservations.length;v++)t.shopCurrent[h].reservations[v].user_id==t.userId&&c.push(t.shopCurrent[h]);t.reservationsCurrent=c;for(var f=[],l=0,x=0;x<t.shopCurrent.length;x++){for(var _=0;_<t.shopCurrent[x].favorites.length;_++)t.shopCurrent[x].favorites[_].user_id==t.userId&&1==t.shopCurrent[x].favorites[_].favorite&&(f.push(t.shopCurrent[x]),l++);t.shopCurrent[x].favorites=0!=l?1:0}t.favoriteCurrent=f}}));case 6:case"end":return e.stop()}}),e)})))()},methods:{getData:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var r,i,n,o,d,c,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("https://afternoon-beyond-97179.herokuapp.com/api/shop").then((function(e){return t.shopCurrent=e.data.data}));case 2:for(r=[],i=0;i<t.shopCurrent.length;i++)for(n=0;n<t.shopCurrent[i].reservations.length;n++)t.shopCurrent[i].reservations[n].user_id==t.userId&&r.push(t.shopCurrent[i]);for(t.reservationsCurrent=r,o=[],d=0,c=0;c<t.shopCurrent.length;c++){for(h=0;h<t.shopCurrent[c].favorites.length;h++)t.shopCurrent[c].favorites[h].user_id==t.userId&&1==t.shopCurrent[c].favorites[h].favorite&&(o.push(t.shopCurrent[c]),d++);t.shopCurrent[c].favorites=0!=d?1:0}t.favoriteCurrent=o;case 9:case"end":return e.stop()}}),e)})))()},destroy:(d=Object(c.a)(regeneratorRuntime.mark((function t(e){var r,n,i,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$axios.get("https://afternoon-beyond-97179.herokuapp.com/api/reservation");case 2:for(r=t.sent,n=0,i=0;i<r.data.data.length;i++)r.data.data[i].user_id==this.userId&&r.data.data[i].shop_id==e&&(n=r.data.data[i].id);return o="https://afternoon-beyond-97179.herokuapp.com/api/reservation/"+n,t.next=8,f.a.delete(o);case 8:this.getData();case 9:case"end":return t.stop()}}),t,this)}))),function(t){return d.apply(this,arguments)}),detail:function(t){this.$router.replace("/detail/"+t)},addFavorite:(o=Object(c.a)(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===h.a.auth().currentUser){t.next=8;break}return r={user_id:this.userId,shop_id:e,favorite:!0},t.next=5,f.a.post("https://afternoon-beyond-97179.herokuapp.com/api/favorite",r);case 5:this.getInfo(),t.next=9;break;case 8:this.$router.replace("/login");case 9:case 10:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)}),deleteFavorite:(n=Object(c.a)(regeneratorRuntime.mark((function t(e){var r,n,i,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=0,t.next=3,this.$axios.get("https://afternoon-beyond-97179.herokuapp.com/api/favorite");case 3:n=t.sent,i=0;case 5:if(!(i<n.data.data.length)){t.next=13;break}if(n.data.data[i].user_id!=this.userId||n.data.data[i].shop_id!=e){t.next=9;break}return r=n.data.data[i].id,t.abrupt("break",13);case 9:case 10:i++,t.next=5;break;case 13:return o="https://afternoon-beyond-97179.herokuapp.com/api/favorite/"+r,t.next=16,f.a.delete(o);case 16:this.getInfo();case 17:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})}},x=l,_=(r(284),r(286),r(36)),component=Object(_.a)(x,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"mypage-container"},[r("div",{staticClass:"left-side"},[r("h2",[t._v("予約状況")]),t._v(" "),t._l(t.reservationsCurrent,(function(e,n){return r("div",{key:e.id,staticClass:"reservation"},[r("p",[t._v("予約"+t._s(n+1))]),t._v(" "),t._m(0,!0),t._v(" "),r("div",{staticClass:"close-pic"},[r("img",{attrs:{src:"/close.png",alt:"画像"},on:{click:function(r){return t.destroy(e.id)}}})]),t._v(" "),r("table",[r("tr",[r("th",[t._v("Shop")]),t._v(" "),r("td",[t._v(t._s(e.shop_name))])]),t._v(" "),r("tr",[r("th",[t._v("Date")]),t._v(" "),t._l(e.reservations,(function(e){return r("td",{key:e.id},[t._v(t._s(e.reservation_date.replace(e.reservation_date.slice(-9),"")))])}))],2),t._v(" "),r("tr",[r("th",[t._v("Time")]),t._v(" "),t._l(e.reservations,(function(e){return r("td",{key:e.id},[t._v(t._s(e.reservation_date.slice(-9).slice(0,6)))])}))],2),t._v(" "),r("tr",[r("th",[t._v("Number")]),t._v(" "),t._l(e.reservations,(function(e){return r("td",{key:e.id},[t._v(t._s(e.num_members)+"人")])}))],2)])])}))],2),t._v(" "),r("div",{staticClass:"right-side"},[r("h2",[t._v(t._s(t.userName)+"さん")]),t._v(" "),r("p",[t._v("お気に入り店舗")]),t._v(" "),r("div",{staticClass:"shopcards"},t._l(t.favoriteCurrent,(function(e){return r("div",{key:e.id,staticClass:"shopcard"},[r("div",{staticClass:"shop-pic"},[r("img",{attrs:{src:e.pic_path,alt:"画像"}})]),t._v(" "),r("div",{staticClass:"shop-des"},[r("h2",[t._v(t._s(e.shop_name))]),t._v(" "),r("p",[r("span",[t._v("#"+t._s(e.area_name)+" ")]),t._v(" "),r("span",[t._v("#"+t._s(e.genre_name)+" ")])]),t._v(" "),r("div",{staticClass:"flex"},[r("button",{on:{click:function(r){return t.detail(e.id)}}},[t._v("詳しくみる")]),t._v(" "),r("div",[1==e.favorites?r("img",{attrs:{src:"/heart2.png",alt:"画像"},on:{click:function(r){return t.deleteFavorite(e.id)}}}):r("img",{attrs:{src:"/heart1.png",alt:"画像"},on:{click:function(r){return t.addFavorite(e.id)}}})])])])])})),0)])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"time-pic"},[e("img",{attrs:{src:"/time.png",alt:"画像"}})])}],!1,null,"2d646789",null);e.default=component.exports}}]);